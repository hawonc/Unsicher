from openai import OpenAI
import json

api_key = ""
client = OpenAI(api_key=api_key)

with open("info.json", "r") as file:
  user_info = json.load(file)

responses = []

dateval = user_info[0].get('date', '')
osval = user_info[0].get('os', '')
clientval = user_info[0].get('client', '')
deviceval = user_info[0].get('device', '')
nationval = user_info[0].get('nation', '')
regionval = user_info[0].get('region', '')
secondnationval = user_info[1].get('nation', '')

user_content = (
  f"The nation the user is assumed to be from : {secondnationval}"
  f"Actual information on user( "
  f"date: {dateval}, "
  f"operating system: {osval}, "
  f"client: {clientval}, "
  f"device: {deviceval}, "
  f"nation: {nationval}, "
  f"region: {regionval}, "
)

response = client.chat.completions.create(
  model="gpt-3.5-turbo",
  messages=[
    {
      "role": "system",
      "content": "Is the user suspicious based on the given information? Provide an informative response. "
                 "The user's assumption and the actual location differing is very suspicious."
                 "If they are on the tor browser, they are most likely hiding something."
                 "Take into account what information does not match and why they might be lying "
                 "based on context of where they live and other information combined."
                 "Finally, rate the user from 1 to 100. 1 being not suspicious at all and 100 being very suspicious."
                 "Consider the countries reputation when rating. "
    },
    {
      "role": "user",
      "content": user_content
    }
  ],
  temperature=1,
  max_tokens=300,
  top_p=1
)
print(response.choices[0].message.content)
